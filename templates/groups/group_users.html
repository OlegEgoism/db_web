{% extends 'base.html' %}

{% block content %}
    <div class="welcome-group">
        <h2 class="welcome-title">–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –≥—Ä—É–ø–ø–µ: {{ group_name }} ({{ user_count }} —à—Ç.)</h2>
        <hr>
        <!-- –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ -->
        <input type="text" id="userSearch" class="user-search" onkeyup="filterUsers()" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è..."/>

        <div class="group-dates">
            <small>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã: {% if group_log.created_at %}{{ group_log.created_at|date:"d.m.Y H:i" }}{% else %}‚Äî{% endif %}</small>
            <small>–î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã: {% if group_log.updated_at %}{{ group_log.updated_at|date:"d.m.Y H:i" }}{% else %}‚Äî{% endif %}</small>
            <small>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –≥—Ä—É–ø–ø–µ: {% if user_count %}{{ user_count }}{% else %}0{% endif %} —à—Ç.</small>
        </div>

        <div class="group-users-grid" id="userList">
            {% for user in users %}
                <a href="{% url 'user_info' username=user %}" class="group-link-user">{{ user }}</a>
            {% empty %}
                <h3 class="no-users">–ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —ç—Ç–æ–π –≥—Ä—É–ø–ø–µ</h3>
            {% endfor %}
        </div>

        <div class="all-btn">
            <a href="{% url 'group_list' %}" class="btn btn-cancel">–ù–∞–∑–∞–¥</a>
        </div>
    </div>

    <script>
        function filterUsers() {
            let input = document.getElementById("userSearch");
            let filter = input.value.toLowerCase();
            let items = document.querySelectorAll(".group-link-user");

            items.forEach(item => {
                let userName = item.textContent.toLowerCase();
                if (userName.includes(filter)) {
                    item.style.display = "block";
                } else {
                    item.style.display = "none";
                }
            });
        }
    </script>

{% endblock %}
