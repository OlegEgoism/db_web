{% extends 'base.html' %}

{% block content %}
    <div class="welcome-container">
        <div class="title-with-button" style="display: flex; align-items: center; justify-content: space-between;">
            <h2 class="welcome-title">Список пользовательских групп ({{ user_groups_data|length }} шт.)</h2>
            <a href="{% url 'group_create' %}" class="btn btn-save" style="margin-left: auto;">Создать группу</a>
        </div>
        <hr>
        {% for group, count, created_at, updated_at in user_groups_data %}
            <div class="group-item">
                <div class="group-number">
                    <strong>{{ forloop.counter }}. </strong>
                </div>
                <div class="group-name">
                    <a href="{% url 'group_users' group %}" class="group-link-user">{{ group }}</a>
                </div>
                <div class="group-dates">
                    <small>Создан: {% if created_at %}{{ created_at|date:"d.m.Y H:i" }}{% else %}—{% endif %}</small>
                    <small>Изменен: {% if updated_at %}{{ updated_at|date:"d.m.Y H:i" }}{% else %}—{% endif %}</small>
                </div>
                <div class="group-user-count">
                    <small>Пользователей: {{ count }} шт.</small>
                </div>
                <div class="group-action">
                    <a href="{% url 'group_edit' group %}" class="btn btn-edit">Редактировать</a>
                    <a href="{% url 'group_delete' group %}" class="btn btn-delete" onclick="return confirm('Удалить группу {{ group }}?')">Удалить</a>
                </div>
            </div>
        {% empty %}
            <li>Нет пользовательских групп</li>
        {% endfor %}
    </div>
{% endblock %}
